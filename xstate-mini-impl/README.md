# 状态机机制的最小实现示例

状态机定义如下：

- 定义一：有限的状态
- 定义二：有限的事件
- 定义三：一个初始状态
- 定义四：变换器（给定当前状态 + 事件，可以得出下个状态）
- 定义五：若干个（或无）的最终状态

依据状态机定义进行 xstate 设计。我们逐个分析。

## 定义一：有限的状态

状态机之所以这样命名，大略都可以理解为管理“状态”的机器。从工业生产可用性的角度来看，任何事物都是可以**近似**看做有限的状态的。

怎么理解呢？比如一杯水的温度可以算作它的状态，理论上温度的值是无限的，比如我可以说水的温度从 30° 升到了 30.0001° 也算是状态变化，但是我们在普遍场景下，对水的温度精度并不会要求很高。

因此我们可以定义为水的每 1° 就是一个状态，并且我们只关注 0° ~ 100°。因此水的温度状态就只有 100 个，从而表达了**有限**的概念。

对于设计实现来说，我们拿灯泡举例子，假设灯泡有亮、不亮、坏掉三个状态，我们仅仅用一个数组就可以表达完这个事情。

```js
const lightBulbStates = ['LIT', 'UNLIT', 'BROKEN'];
```

当然，在实际开发中，我们也可以用哈希表或者 enum 枚举所有状态。

```js
const lightBulbStates = {
  lit: 'LIT',
  unlit: 'UNLIT',
  broken: 'BROKEN',
};
```

## 定义二：有限的事件

## 定义三：一个初始状态

## 定义四：变换器（给定当前状态 + 事件，可以得出下个状态）

## 定义五：若干个（或无）的最终状态
